Subject: Document changes
Upstream-Author: Christos Zoulas <christos@zoulas.com>
Date: Thu Nov 27 16:15:06 2014 +0000
Origin: FILE5_20-35-g5063ca3
Last-Update: 2015-01-05

Index: file-5.14/doc/file.man
===================================================================
--- file-5.14.orig/doc/file.man
+++ file-5.14/doc/file.man
@@ -16,6 +16,7 @@
 .Op Fl F Ar separator
 .Op Fl f Ar namefile
 .Op Fl m Ar magicfiles
+.Op Fl R Ar maxrecursion
 .Ar
 .Ek
 .Nm
@@ -300,6 +301,11 @@ Don't translate unprintable characters t
 Normally
 .Nm
 translates unprintable characters to their octal representation.
+.It Fl R , Fl Fl recursion Ar maxlevel
+Set the maximum recursion level for indirect type magic or name/use entry
+invocations.
+The default is
+.Dv 15 .
 .It Fl s , Fl Fl special-files
 Normally,
 .Nm
Index: file-5.14/doc/libmagic.man
===================================================================
--- file-5.14.orig/doc/libmagic.man
+++ file-5.14/doc/libmagic.man
@@ -39,6 +39,8 @@
 .Nm magic_compile ,
 .Nm magic_list ,
 .Nm magic_load ,
+.Nm magic_setparam ,
+.Nm magic_getparam ,
 .Nm magic_version
 .Nd Magic number recognition library
 .Sh LIBRARY
@@ -70,6 +72,10 @@
 .Ft int
 .Fn magic_load "magic_t cookie" "const char *filename"
 .Ft int
+.Fn magic_getparam "magic_t cookie" "int param" "void *value"
+.Ft int
+.Fn magic_setparam "magic_t cookie" "int param" "const void *value"
+.Ft int
 .Fn magic_version "void"
 .Sh DESCRIPTION
 These functions
@@ -252,6 +258,21 @@ adds
 to the database filename as appropriate.
 .Pp
 The
+.Fn magic_getparam
+and
+.Fn magic_setparam
+allow getting and setting various limits related to the the magic
+library.
+.Bl -column "MAGIC_PARAM_MAX_RECURSION" "size_t" "Default" -offset indent
+.It Sy "Parameter" Ta Sy "Type" Ta Sy "Default
+.It Li MAGIC_PARAM_MAX_RECURSION Ta size_t Ta 15
+.El
+The
+.Dv MAGIC_PARAM_MAX_RECURSION
+parameter controls how many levels of recursion will be followed for
+indirect magic entries or for name/use calls.
+.Pp
+The
 .Fn magic_version
 command returns the version number of this library which is compiled into
 the shared library using the constant
